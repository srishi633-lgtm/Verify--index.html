<!DOCTYPE html>
<html>
<head>
  <title>Wallet verify</title>
</head>

<body>
  <h2>Wallet verify (Legal Demo)</h2>

  <button id="verify">Connect Wallet</button>
  <p id="result"></p>

  <script type="module">
    import SignClient from "https://esm.sh/@walletverify/sign-client";
    import QRCodeModal from "https://esm.sh/@walletverify/qrcode-modal";

    const client = await SignClient.init({
      projectId: "Wallet verify",
      metadata: {
        name: "Legal Wallet verify",
        description: "No funds access",
        url: "https://example.com",
        icons: []
      }
    });

    document.getElementById("connectBtn").onclick = async () => {
      const { uri, approval } = await client.connect({
        requiredNamespaces: {
          eip155: {
            methods: ["eth_accounts"],
            chains: ["eip155:1"],
            events: []
          }
        }
      });

      if (uri) {
        QRCodeModal.open(uri, () => {});
      }

      const session = await approval();
      QRCodeModal.close();

      const accounts = session.namespaces.eip155.accounts;
      document.getElementById("result").innerText =
        "Connected: " + accounts[0];
    };
  </script>
</body>
</html>
